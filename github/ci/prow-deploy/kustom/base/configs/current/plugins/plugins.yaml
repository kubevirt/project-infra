# source https://github.com/kubernetes-sigs/prow/blob/8cd4af136cc0eeb9ee7ab9fc11cd99f7adba663e/pkg/plugins/config.go#L52
# let's keep the order in the same way as it's defined in above configuration

plugins:

  k8snetworkplumbingwg/kubemacpool:
    plugins:
    - approve
    - assign
    - blunderbuss
    - cat
    - dco
    - dog
    - hold
    - label
    - lgtm
    - lifecycle
    - override
    - pony
    - release-note
    - size
    - skip
    - trigger
    - verify-owners
    - wip

  k8snetworkplumbingwg/ovs-cni:
    plugins:
    - approve
    - dco
    - hold
    - lgtm
    - owners-label
    - release-note
    - trigger
    - verify-owners
    - wip


  # we don't get events from there, it has no effect
  # but it is needed to host jobs on our prow and still
  # have a consistent valid config.
  kubernetes-sigs/cluster-api-provider-kubevirt:
    plugins:
    - trigger


  kubevirt:
    plugins:
    - assign
    - blunderbuss
    - cat
    - dco
    - dog
    - hold
    - invalidcommitmsg
    - label
    - lifecycle
    - override
    - pony
    - size
    - skip
    - verify-owners
    - wip

  kubevirt/ansible-kubevirt-modules:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/bridge-marker:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/charts:
    plugins:
    - approve
    - lgtm
    - trigger

  kubevirt/cloud-image-builder:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/cloud-provider-kubevirt:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/cluster-api-provider-kubevirt:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/cluster-network-addons-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubesecondarydns:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/ipam-extensions:
    plugins:
    - approve
    - lgtm
    - owners-label

  kubevirt/common-instancetypes:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/common-templates:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/community:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/enhancements:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/containerdisks:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/containerized-data-importer:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/controller-lifecycle-operator-sdk:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/csi-driver:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/cpu-nfd-plugin:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/demo:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/dra-pci-driver:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/hostpath-provisioner:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/hostpath-provisioner-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/hyperconverged-cluster-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/irsa-mutation-webhook:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/katacoda-scenarios:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/kubectl-virt-plugin:
    plugins:
    - approve
    - lgtm
    - trigger

  kubevirt/kubevirt.core:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/kubevirt:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubevirt-ansible:
    plugins:
    - release-note

  kubevirt/kubevirt-tekton-tasks:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/kubevirt-ssp-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubevirt-template-validator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubevirt-tutorial:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/kubevirt-velero-plugin:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/kubevirt.github.io:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/kubevirtci:
    plugins:
    - approve
    - lgtm
    - trigger
    - help

  kubevirt/kvm-info-nfd-plugin:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/libguestfs-appliance:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/must-gather:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/macvtap-cni:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/machine-remediation-operator:
    plugins:
    - approve
    - lgtm
    - trigger

  kubevirt/node-labeller:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/node-maintenance-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/project-infra:
    plugins:
    - approve
    - config-updater
    - lgtm
    - trigger
    - help

  kubevirt/qe-tools:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/secrets:
    plugins:
    - approve
    - branchcleaner
    - lgtm
    - trigger

  kubevirt/sig-release:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/ssp-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/managed-tenant-quota:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/application-aware-quota:
    plugins:
      - approve
      - lgtm
      - owners-label
      - release-note
      - trigger
      - help

  kubevirt/terraform-provider-kubevirt:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/test-benchmarks:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/user-guide:
    plugins:
    - approve
    - lgtm
    - owners-label
    - trigger

  kubevirt/virt-template:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/vm-console-proxy:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    - help

  kubevirt/vm-import-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubevirt-migration-controller:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger
    
  kubevirt/kubevirt-migration-operator:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  kubevirt/kubevirt-aie:
    plugins:
    - approve
    - lgtm
    - owners-label
    - release-note
    - trigger

  nmstate/kubernetes-nmstate:
    plugins:
    - approve
    - assign
    - blunderbuss
    - cat
    - dco
    - dog
    - hold
    - label
    - lgtm
    - lifecycle
    - override
    - owners-label
    - pony
    - release-note
    - size
    - skip
    - trigger
    - verify-owners
    - wip

  nmstate/nmstate:
    plugins:
    - override
    - trigger


  virtblocks:
    plugins:
    - dco
    - trigger


external_plugins:
  libguestfs-appliance:
  - name: needs-rebase
    events:
      - pull_request
  - name: cherrypicker
  - name: release-blocker
  kubevirt:
  - name: needs-rebase
    events:
      - pull_request
      - issue_comment
  - name: cherrypicker
  - name: release-blocker
  k8snetworkplumbingwg/ovs-cni:
  - name: needs-rebase
    events:
      - pull_request
  - name: cherrypicker
  k8snetworkplumbingwg/kubemacpool:
  - name: needs-rebase
    events:
      - pull_request
  - name: cherrypicker
  nmstate/kubernetes-nmstate:
  - name: needs-rebase
    events:
      - pull_request
  - name: cherrypicker
  kubevirt/project-infra:
  - name: rehearse
    endpoint: http://prow-rehearse:9900
    events:
      - pull_request
      - issue_comment
  kubevirt/kubevirt:
  - name: phased
    endpoint: http://prow-phased:9900
    events:
      - pull_request
  - name: referee
    endpoint: http://referee:9900
    events:
      - issue_comment
      - pull_request
  - name: test-subset
    endpoint: http://test-subset:9900
    events:
      - issue_comment

approve:
- repos:
  - kubevirt/project-infra
  - kubevirt/machine-remediation-operator
  - kubevirt/kubevirtci
  - kubevirt/charts
  - kubevirt/containerdisks
  - kubevirt/kubevirt.github.io
  - kubevirt/cloud-image-builder
  - kubevirt/community
  - kubevirt/kubevirt-tutorial
  - kubevirt/kubevirt
  - kubevirt/bridge-marker
  - kubevirt/containerized-data-importer
  - kubevirt/cluster-api-provider-kubevirt
  - kubevirt/hostpath-provisioner
  - kubevirt/hostpath-provisioner-operator
  - kubevirt/katacoda-scenarios
  - kubevirt/demo
  - kubevirt/cluster-network-addons-operator
  - kubevirt/kubesecondarydns
  - kubevirt/ipam-extensions
  - nmstate/kubernetes-nmstate
  - k8snetworkplumbingwg/kubemacpool
  - kubevirt/kubectl-virt-plugin
  - kubevirt/node-maintenance-operator
  - kubevirt/ansible-kubevirt-modules
  - kubevirt/hyperconverged-cluster-operator
  - kubevirt/common-instancetypes
  - kubevirt/common-templates
  - kubevirt/kvm-info-nfd-plugin
  - kubevirt/cpu-nfd-plugin
  - kubevirt/node-labeller
  - kubevirt/kubevirt-template-validator
  - kubevirt/kubevirt-ssp-operator
  - kubevirt/ssp-operator
  - kubevirt/kubevirt-tekton-tasks
  - kubevirt/must-gather
  - kubevirt/csi-driver
  - kubevirt/user-guide
  - kubevirt/terraform-provider-kubevirt
  - kubevirt/kubevirt-velero-plugin
  - kubevirt/qe-tools
  - kubevirt/cloud-provider-kubevirt
  - kubevirt/test-benchmarks
  - kubevirt/vm-console-proxy
  - kubevirt/sig-release
  - kubevirt/kubevirt.core
  - kubevirt/managed-tenant-quota
  - kubevirt/application-aware-quota
  - kubevirt/dra-pci-driver
  - kubevirt/enhancements
  - kubevirt/irsa-mutation-webhook
  - kubevirt/virt-template
  - kubevirt/kubevirt-migration-controller
  - kubevirt/kubevirt-migration-operator
  require_self_approval: true
  lgtm_acts_as_approve: false
  ignore_review_state: true
  commandHelpLink: https://prow.ci.kubevirt.io/command-help
  pr_process_link: https://github.com/kubevirt/community/blob/main/docs/add-merge-automation-to-your-repository.md#example-workflow
- repos:
  - kubevirt/secrets
  require_self_approval: false
  lgtm_acts_as_approve: true
  ignore_review_state: true
  commandHelpLink: https://prow.ci.kubevirt.io/command-help
  pr_process_link: https://github.com/kubevirt/community/blob/main/docs/add-merge-automation-to-your-repository.md#example-workflow

blunderbuss:
  ignore_drafts: true

config_updater:
  maps:
    github/ci/prow-deploy/kustom/base/configs/current/config/config.yaml:
      name: config
      clusters:
        default:
        - kubevirt-prow
    github/ci/prow-deploy/files/jobs/**/*.yaml:
      gzip: true
      name: job-config
      clusters:
        default:
        - kubevirt-prow
    github/ci/prow-deploy/kustom/base/configs/current/plugins/plugins.yaml:
      name: plugins
      clusters:
        default:
        - kubevirt-prow
    github/ci/prow-deploy/kustom/base/configs/current/labels/labels.yaml:
      name: label-config
      clusters:
        default:
        - kubevirt-prow

help:
  help_guidelines_url: "https://www.github.com/kubevirt/community/tree/main/contributors/help-wanted.md"
  help_guidelines_summary: |
    - **No Barrier to Entry**
    - **Clear Task**
    - **Solution Explained**
    - **Provides Context**
    - **Identifies Relevant Code**
    - **Gives Examples**
    - **Ready to Test**
    - **Goldilocks priority**
    - **Up-To-Date**

label:
  restricted_labels:

    # ORG section
    # for repo specific sections see below
    'kubevirt':
    - allowed_users:
      #
      # kubevirt-bot ONLY is allowed to use "skip-review"
      # targets are PRs generated by automation where automated checks are sufficient
      # each target requires verification that sufficient automated checks are in place, so that
      # merging faulty PRs is avoided
      #
      - kubevirt-bot
      label: skip-review

    - allowed_users:
      - kubevirt-bot
      allowed_teams:
      - restricted-labels-kubevirt
      label: needs-approver-review

    - allowed_teams:
      - restricted-labels-kubevirt
      label: good-first-issue

    - allowed_teams:
      - restricted-labels-kubevirt
      label: approved-vep

lgtm:
- repos:
  - kubevirt/machine-remediation-operator
  - kubevirt/project-infra
  - kubevirt/kubevirtci
  - kubevirt/kubevirt.github.io
  - kubevirt/charts
  - kubevirt/cloud-image-builder
  - kubevirt/community
  - kubevirt/kubevirt-tutorial
  - kubevirt/kubevirt
  - kubevirt/containerdisks
  - kubevirt/bridge-marker
  - kubevirt/containerized-data-importer
  - kubevirt/cluster-api-provider-kubevirt
  - kubevirt/hostpath-provisioner
  - kubevirt/hostpath-provisioner-operator
  - kubevirt/katacoda-scenarios
  - kubevirt/demo
  - kubevirt/cluster-network-addons-operator
  - kubevirt/kubesecondarydns
  - kubevirt/ipam-extensions
  - nmstate/kubernetes-nmstate
  - k8snetworkplumbingwg/kubemacpool
  - kubevirt/kubectl-virt-plugin
  - kubevirt/node-maintenance-operator
  - kubevirt/ansible-kubevirt-modules
  - kubevirt/hyperconverged-cluster-operator
  - kubevirt/common-instancetypes
  - kubevirt/common-templates
  - kubevirt/kvm-info-nfd-plugin
  - kubevirt/cpu-nfd-plugin
  - kubevirt/node-labeller
  - kubevirt/kubevirt-template-validator
  - kubevirt/kubevirt-ssp-operator
  - kubevirt/ssp-operator
  - kubevirt/kubevirt-tekton-tasks
  - kubevirt/must-gather
  - kubevirt/csi-driver
  - kubevirt/user-guide
  - kubevirt/terraform-provider-kubevirt
  - kubevirt/kubevirt-velero-plugin
  - kubevirt/qe-tools
  - kubevirt/cloud-provider-kubevirt
  - kubevirt/secrets
  - kubevirt/test-benchmarks
  - kubevirt/vm-console-proxy
  - kubevirt/sig-release
  - kubevirt/kubevirt.core
  - kubevirt/managed-tenant-quota
  - kubevirt/application-aware-quota
  - kubevirt/dra-pci-driver
  - kubevirt/enhancements
  - kubevirt/irsa-mutation-webhook
  - kubevirt/virt-template
  - kubevirt/kubevirt-migration-controller
  - kubevirt/kubevirt-migration-operator
  review_acts_as_lgtm: true

override:
  allow_top_level_owners: true

triggers:
- repos:
  - kubevirt/project-infra
  - kubevirt/machine-remediation-operator
  - kubevirt/kubevirtci
  - kubevirt/kubevirt
  - kubevirt/charts
  - kubevirt/containerdisks
  - kubevirt/kubevirt.github.io
  - kubevirt/cloud-image-builder
  - kubevirt/kubevirt-tutorial
  - kubevirt/containerized-data-importer
  - kubevirt/cluster-api-provider-kubevirt
  - kubevirt/hostpath-provisioner
  - kubevirt/hostpath-provisioner-operator
  - kubevirt/katacoda-scenarios
  - kubevirt/common-instancetypes
  - kubevirt/common-templates
  - kubevirt/kvm-info-nfd-plugin
  - kubevirt/cpu-nfd-plugin
  - kubevirt/node-labeller
  - kubevirt/kubevirt-template-validator
  - kubevirt/kubevirt-ssp-operator
  - kubevirt/sig-release
  - kubevirt/ssp-operator
  - kubevirt/kubevirt-tekton-tasks
  - kubevirt/must-gather
  - kubevirt/demo
  - kubevirt/cluster-network-addons-operator
  - kubevirt/kubesecondarydns
  - kubevirt/ipam-extensions
  - kubevirt/node-maintenance-operator
  - kubevirt/ansible-kubevirt-modules
  - kubevirt/hyperconverged-cluster-operator
  - kubevirt/vm-import-operator
  - kubevirt/csi-driver
  - kubevirt/community
  - kubevirt/terraform-provider-kubevirt
  - kubevirt/kubevirt-velero-plugin
  - kubevirt/qe-tools
  - kubevirt/cloud-provider-kubevirt
  - kubevirt/secrets
  - kubevirt/test-benchmarks
  - kubevirt/vm-console-proxy
  - kubevirt/kubevirt.core
  - kubevirt/managed-tenant-quota
  - kubevirt/application-aware-quota
  - kubevirt/enhancements
  - kubevirt/irsa-mutation-webhook
  - kubevirt/virt-template
  - kubevirt/kubevirt-migration-controller
  - kubevirt/kubevirt-migration-operator
  ignore_ok_to_test: true
- repos:
  - virtblocks/virtblocks
  ignore_ok_to_test: true
- repos:
  - nmstate/kubernetes-nmstate
  ignore_ok_to_test: true
- repos:
  - k8snetworkplumbingwg/kubemacpool
  ignore_ok_to_test: true
