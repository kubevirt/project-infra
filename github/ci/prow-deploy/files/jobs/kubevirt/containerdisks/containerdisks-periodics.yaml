periodics:
- annotations:
    testgrid-dashboards: kubevirt-containerdisks-periodics
    testgrid-alert-email: fmatouschek@redhat.com, lyarwood@redhat.com
  cluster: kubevirt-prow-workloads
  cron: 0 2 * * *
  decorate: true
  decoration_config:
    grace_period: 5m0s
    timeout: 7h0m0s
  extra_refs:
  - base_ref: main
    org: kubevirt
    repo: containerdisks
    workdir: true
  labels:
    preset-podman-in-container-enabled: "true"
    preset-docker-mirror-proxy: "true"
    preset-kubevirtci-quay-credential: "true"
  max_concurrency: 1
  name: periodic-containerdisks-push-nightly
  spec:
    containers:
    - command:
      - /usr/local/bin/runner.sh
      - /bin/sh
      - -c
      - |
        set -e
        cat "$QUAY_PASSWORD" | docker login --username $(cat "$QUAY_USER") --password-stdin=true quay.io
        ./pipeline-periodic.sh
      env:
      - name: GIMME_GO_VERSION
        value: "1.22.6"
      image: quay.io/kubevirtci/golang:v20240911-16816d3
      name: ""
      resources:
        requests:
          memory: 16Gi
      securityContext:
        privileged: true
