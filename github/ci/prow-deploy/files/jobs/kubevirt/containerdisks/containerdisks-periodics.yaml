periodics:
- annotations:
    testgrid-create-test-group: "false"
  cluster: prow-workloads
  cron: 0 2 * * *
  decorate: true
  decoration_config:
    grace_period: 5m0s
    timeout: 7h0m0s
  extra_refs:
  - base_ref: main
    org: kubevirt
    repo: containerdisks
    workdir: true
  labels:
    preset-dind-enabled: "true"
    preset-docker-mirror-proxy: "true"
    preset-kubevirtci-quay-credential: "true"
  max_concurrency: 1
  name: periodic-containerdisks-push-nightly
  spec:
    containers:
    - command:
      - /usr/local/bin/runner.sh
      - /bin/sh
      - -c
      - |
        set -e
        cat "$QUAY_PASSWORD" | docker login --username $(cat "$QUAY_USER") --password-stdin=true quay.io
        ./pipeline-periodic.sh
      env:
      - name: GIMME_GO_VERSION
        value: "1.17"
      image: quay.io/kubevirtci/golang:v20220728-1410a63
      name: ""
      resources:
        requests:
          memory: 16Gi
      securityContext:
        privileged: true
