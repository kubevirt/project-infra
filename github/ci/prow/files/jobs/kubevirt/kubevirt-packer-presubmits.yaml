presubmits:
  kubevirt/kubevirt:
  - name: pull-kubevirt-e2e-k8s-1.11.0
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=k8s-1.11.0 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "12Gi"
  - name: pull-kubevirt-e2e-k8s-genie-1.11.1
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=k8s-genie-1.11.1 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "12Gi"
  - name: pull-kubevirt-e2e-k8s-1.13.3
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=k8s-1.13.3 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "12Gi"
  - name: pull-kubevirt-e2e-k8s-multus-1.13.3
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=k8s-multus-1.13.3 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "12Gi"
  - name: pull-kubevirt-e2e-os-3.11.0-crio
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 5h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=os-3.11.0-crio && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "16Gi"
  - name: pull-kubevirt-e2e-os-3.11.0-multus
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 5h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=os-3.11.0-multus && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "16Gi"
  - name: pull-kubevirt-e2e-os-3.11.0
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 5h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=os-3.11.0 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "16Gi"
  - name: pull-kubevirt-e2e-okd-4.1.0-rc.0
    always_run: false
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 8
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=okd-4.1.0-rc.0 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "19Gi"
  - name: pull-kubevirt-e2e-windows2016
    always_run: true
    optional: true
    decorate: true
    decoration_config:
      timeout: 4h
      grace_period: 5m
    max_concurrency: 5
    labels:
      preset-dind-enabled: "true"
      preset-docker-mirror: "true"
      preset-shared-images: "true"
    spec:
      nodeSelector:
        model: r430
        type: bare-metal
      containers:
      - image: gcr.io/k8s-testimages/bootstrap:v20190516-c6832d9
        command:
        - "/usr/local/bin/runner.sh"
        - "/bin/sh"
        - "-c"
        - "export TARGET=windows2016 && automation/test.sh"
        # docker-in-docker needs privileged mode
        securityContext:
          privileged: true
        resources:
          requests:
            memory: "12Gi"
